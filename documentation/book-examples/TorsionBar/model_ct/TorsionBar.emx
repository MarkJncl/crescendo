<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Model version="4.3" build="4.3.0.3214">
  <Sidops><![CDATA[model 0 0
 description '<Information>
 <Description>
    <LibraryPath>D:\dev\destecs-1.3.8\workspace\TorsionBar\model_ct\TorsionBar.emx</LibraryPath>
  <TimeStamp>2013-3-26 10:42:39</TimeStamp>
  <Version>4.3</Version>
</Description>
</Information>';
 type 'Mainmodel- Mike Bax'
 end;
 implementation bg
  submodels
   Amplifier 287 64
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type Submodel
     ports
      signal in input;
      signal out output;
    end;
    icon bg top
     figures
      line 271 48 271 80 303 64 271 48 fill 15132390;
      text 'A' 282.2 64 color 16711680 16 bold;
     terminals
      input 272 64 fixed;
      output 304 64 fixed;
    end;
    implementation bg
     submodels
      Amplifier 296 136
       description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Signal\Sources\MotionProfile.emx</LibraryPath>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         line 280 120 280 152 312 136 280 120 fill 15132390;
         text 'A' 291.2 136 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real VCC = 12.0 {V};
equations
	output = VCC * input;
    implementation_end;
      DA 216 136
       description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type DA
        ports
         signal in input;
         signal out output;
        parameters
         real minimum = -5.0;
         real maximum = 5.0;
         real bits = 12.0;
       end;
       icon bg bottom
        figures
         rectangle 200 120 232 152 fill 15132390;
         spline 206.4 145.3 224 127.7 color 16711680;
         text 'A' 222.2 141.5 color 16711680 14;
         text 'D' 209.2 130.8 color 16711680 14;
       end;
       implementation eq
variables
	real windowed_signal, quantisized_signal, rounded_signal;
	real lsb, half_lsb;
equations
	lsb = (maximum - minimum) / (exp2 (bits) -1);
	half_lsb = lsb / 2;
	windowed_signal = if input <= minimum then
		minimum+ half_lsb
	else
		if input >= maximum then 
			maximum - half_lsb
		else 
			input
		end
	end;
	quantisized_signal = if windowed_signal < 0.0 then
		windowed_signal - half_lsb
	else
		 windowed_signal + half_lsb
	end;

	rounded_signal =  quantisized_signal - (quantisized_signal mod lsb);
	output = hold (rounded_signal);
      implementation_end;
      plug input 128 136;
      plug output 376 136;
     end;
     connections
      input -> DA\input;
      Amplifier\output -> output;
      DA\output -> Amplifier\input;
     end;
    implementation_end;
   Belt 616 70.2
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Components\Break.emx</LibraryPath>
</Description>';
    type Transmission
     ports
      rotation psi in p_in;
      rotation psi out p_out;
     restrictions
      orientation constraint not_equal p_in p_out;
      causality constraint not_equal p_in p_out;
    end;
    icon ipm top
     figures
      line 590.4 57 628.8 49;
      ellipse 584 55.9 600 71.9 fill 16777215;
      ellipse 616 47.9 648 79.9 fill 16777215;
      line 592 70.8 632 78.8;
      ellipse 587.2 59.6 595.2 67.6 fill 9211020;
      ellipse 627.2 60.2 635.2 68.2 fill 9211020;
      line 576 63.9 592 63.9;
      line 632 63.9 656 63.9;
      text '1' 590.4 79.4;
      text 'i' 630.4 87.4 color 16711680;
     terminals
      p_in 576 63.9 fixed;
      p_out 656 63.9 fixed;
    end;
    implementation eq
parameters
	real i = 3.75 {};				// gearbox ratio
equations
	p_out.T = p_in.T*i;
	p_out.omega = p_in.omega/i;
                     implementation_end;
   Controller 140 72
			specifications active 'CoSim'
				specification 'CoSim'
 description '<Description>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Controller
  ports
   signal out PWM;
   signal in EncoderLoad;
   signal in EncoderMotor;
 end;
 icon bg top
  figures
   rectangle 72 32 208 112 fill 16777152;
   text 'PWM' 152.8 56.3 color 21760 14 italic;
   text 'Motor' 139.8 78.3 color 21760 14 italic;
   text 'Load' 90.3 79.2 color 21760 14 italic;
   text 'co-sim' 96 45 16;
   ellipse 107 83 123 99 color -1 fill 12632256;
   ellipse 104 80 120 96 fill 16777215;
   line 112 112 112 96 color 37632 end;
   ellipse 155 83 171 99 color -1 fill 12632256;
   ellipse 152 80 168 96 fill 16777215;
   line 160 112 160 96 color 37632 end;
   ellipse 171 59 187 75 color -1 fill 12632256;
   ellipse 168 56 184 72 fill 16777215;
   line 184 64 208 64 color 37632 fill 16711680 end;
  terminals
   PWM 208 64 fixed;
   EncoderLoad 112 112 fixed;
   EncoderMotor 160 112 fixed;
 end;
 implementation eq
parameters
	// controller strategy used (sdp)
	real global strategy ('shared');

externals
	real global import pwm_amp;
	real global export enc_motor;
	real global export enc_load;

code
	// the export for this model
	enc_motor = EncoderMotor;
	enc_load = EncoderLoad;

	// IN BETWEEN HERE THE VDM/DESTECS WILL CALCULATE THE NEW PWM VALUE

	// and import the pwm
	PWM = pwm_amp + (0*enc_load + 0*enc_motor);
implementation_end;
specification_end;
				specification 'CTOnly'
description '<Description>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Controller
  ports
   signal out PWM;
   signal in EncoderLoad;
   signal in EncoderMotor;
 end;
 icon bg top
  figures
   rectangle 72 32 208 112 fill 10025880;
   rectangle 144 55 168 79 color -1 fill 12632256;
   ellipse 115 59 131 75 color -1 fill 12632256;
   rectangle 80 56 104 80 color -1 fill 12632256;
   group
    rectangle 76 52 100 76 fill 15132390;
    line 78.2 70 97.8 70;
    line 79.8 58 79.8 71.6;
    line 80.2 69.5 84.2 58.8 90.2 58.8 92 65.8 96.5 65.8 color 16711680;
   end;
   line 120 64 140 64 color 37632 end;
   ellipse 112 56 128 72 fill 16777215;
   rectangle 141 52 165 76 fill 15132390;
   text 'PID' 153 65.5 color 37632 14 bold;
   line 165 64 177 64 color 37632 end;
   line 100 64 112 64 color 37632 end;
   line 120 88 120 72 color 37632 end;
   text '+' 108 73 color 37632 16;
   text '-' 129 83 color 37632 16;
   text 'PWM' 189.8 64.8 color 21760 14 italic;
   text 'Motor' 161 102 color 21760 14 italic;
   text 'Load' 113 102 color 21760 14 italic;
  terminals
   PWM 208 64 fixed;
   EncoderLoad 112 112 fixed;
   EncoderMotor 160 112 fixed;
 end;
 implementation bg
  submodels
   EncToRevLoadDisk 384 288
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Signal\Control\PID Control\Discrete\PID.emx</LibraryPath>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg top
     figures
      rectangle 368 272 400 304 fill 15132390;
      text 'K' 391.5 294.4 color 16711680 16 bold;
      text '1' 377.6 282.7 color 16711680 16 bold;
      line 377.6 298.7 391.5 279.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real counts = 2000;
equations
	output = input / counts;
       implementation_end;
   EncToRevMotor 384 192
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Signal\Control\PID Control\Discrete\PID.emx</LibraryPath>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 368 176 400 208 fill 15132390;
      text 'K' 391.5 198.4 color 16711680 16 bold;
      text '1' 377.6 186.7 color 16711680 16 bold;
      line 377.6 202.7 391.5 183.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real counts = 2000;
equations
	output =input / counts;
       implementation_end;
   Error 112 88
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    knot PlusMinus
     ports
      signal knot duplicatable in plus [1];
      signal knot duplicatable in minus [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 104 80 120 96 fill 16777215;
    end;
    implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
   plug EncoderLoad 488 288;
   plug EncoderMotor 488 192;
   plug PWM 504 88;
   PID 224 88
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Control\PID Control\Discrete\PID.emx</LibraryPath>
 <TimeStamp>2007-9-27 14:49:14</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type PID
     ports
      signal in error;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 208 72 240 104 fill 15132390;
      text 'PID' 224 87.5 color 1336868 18 bold;
    end;
    implementation eq
parameters
	real kp = 2.0 {};			// Proportional gain
	real tauD = 5.0e-5 {s};		// Derivative time constant: tauD > 0
	real beta = 0.1 {};		// Tameness constant: 0 < beta << 1
	real tauI = 2000.0 {s};		// Integral time constant: tauI > 0
variables
	real hidden factor,uD,uI;
equations
	factor = 1 / ( sampletime + tauD * beta );
	uD = factor * ( tauD * previous ( uD ) * beta + tauD * kp * ( error - previous ( error )) + sampletime * kp * error );
	uI = previous( uI ) +  sampletime * uD / tauI;
	output = uI + uD;implementation_end;
   PlusMinus2 112 192
    description '<Description><Version>4.0</Version><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\PlusMinus.emx</LibraryPath>
  <TimeStamp>2007-9-27 10:15:13</TimeStamp>
</Description>';
    knot PlusMinus
     ports
      signal knot duplicatable in plus [1];
      signal knot duplicatable in minus [1];
      signal knot out output [1];
    end;
    icon bg ellipse
     figures
      ellipse 104 184 120 200 fill 16777215;
    end;
    implementation eq
equations
    output = sum (collect (plus)) - sum (collect (minus));
    implementation_end;
   RevMotorToRevMotorDisk 288 192
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Signal\Control\PID Control\Discrete\PID.emx</LibraryPath>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg top
     figures
      rectangle 272 176 304 208 fill 15132390;
      text 'K' 295.5 198.4 color 16711680 16 bold;
      text '1' 281.6 186.7 color 16711680 16 bold;
      line 281.6 202.7 295.5 183.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real i_belt = 3.75;
equations
	output = input / i_belt;
       implementation_end;
   SP 48 88
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Sources\MotionProfile.emx</LibraryPath>
 <TimeStamp>2007-12-19 13:45:54</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
    type 'MotionProfile-Wizard'
     ports
      signal out x;
      signal out v;
      signal out a;
     parameters
      real stroke = 1.0;
      real start_time = 0.0;
      real stop_time = 1.0;
      real return_time = 3.0;
      real end_time = 4.0;
      real period = 5.0;
    end;
    icon bg bottom
     figures
      rectangle 33 73 63 103 fill 15132390;
      line 35.7 95.5 60.3 95.5;
      line 37.8 80.5 37.8 97.6;
      line 37.5 95.2 41.7 82.7 45.2 82.7 47.2 95.2 51.5 95 53.7 82.7 57.5 82.7 60.5 95 color 16711680;
      rectangle 33 73 63 103 color -1;
      line 53.6 77.3 55.6 77.1 color 16711680;
      line 54.8 75.3 56.8 75 color 16711680;
      line 57.1 77.2 59.1 77 color 16711680;
      line 56.7 78.3 59.5 89 color 5855577 width 2;
    end;
    implementation eq
// 20-sim User Editor
// MotionProfile.dll
/*
MotionType	ContinuousPulse
Stroke	1
StartTime	0
StopTime	1
ReturnTime	3
EndTime	4
Period	5
CV	0.2
CA	0.2
n	3
alpha	0.1
BB	0
BM	0
ProfileType	Trapezoidal
DoOutputPosition	1
DoOutputVelocity	1
DoOutputAcceleration	1
InputChoice	0
GenerateEvents	1
DescriptionEnd
*/
 variables
  real hidden u;
  real hidden fu;
  real hidden dfu;
  real hidden d2fu;
  real hidden rise_time;
  real hidden fall_time;
  real hidden modtime;
  boolean hidden evt1, evt2;
  boolean hidden evt3, evt4;
 equations
	rise_time = (stop_time - start_time);
	fall_time = (end_time - return_time);
	modtime = time mod period;
	if modtime < return_time then
		x = stroke * fu;
		v = dfu *  stroke / rise_time;
		a = d2fu *  stroke / rise_time^2;
	else
		x = stroke * (1 - fu);
		v = -dfu *  stroke / fall_time;
		a = -d2fu *  stroke / fall_time^2;
	end;
	if modtime < start_time then
		u = 0;
	else
		if modtime < stop_time then
			u = ( modtime - start_time ) / rise_time;
		else
			if modtime < return_time then
				u = 1;
			else
				if modtime < end_time then
					u = ( modtime - return_time ) / fall_time;
				else
					u = 1;
				end;
			end;
		end;
	end;
	evt1 = frequencyevent(period, start_time);
	evt2 = frequencyevent(period, stop_time);
	evt3 = frequencyevent(period, return_time);
	evt4 = frequencyevent(period, end_time);
	if u == 0 then
		fu = 0;
		dfu = 0;
		d2fu = 0;
	else
		if u <= 0.5 then
			fu = 2 * u * u;
			dfu = 4 * u;
			d2fu = 4;
		else
			if u < 1 then
				fu = 4 * u - 2 * u * u - 1;
				dfu = 4 * ( 1 - u );
				d2fu = -4;
			else
				fu = 1;
				dfu = 0;
				d2fu = 0;
			end;
		end;
	end;
implementation_end;
   Switch1 184 192
			specifications active 'On'
				specification 'On'
 description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\Switch-Make.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:53:10</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type 'Switch-Make'
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 168 176 200 208 fill 15132390;
   ellipse 177 190.3 181 194.7 color 16711680;
   ellipse 188.4 190.4 192.5 194.5 color 16711680;
   line 187.8 191.8 181.2 192 color 16711680 width 2;
   line 177 192.2 170.2 192.2 color 16711680 width 2;
   line 196.9 192.4 192.7 192.4 color 16711680 width 2;
  terminals
   input 200 192 fixed;
   output 168 192 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'Off'
description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\Switch-Make.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:53:10</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type 'Switch-Make'
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 168 176 200 208 fill 15132390;
   ellipse 177 190.3 181 194.7 color 16711680;
   ellipse 188.4 190.4 192.5 194.5 color 16711680;
   line 188.3 186.7 181.9 190.9 color 16711680 width 2;
   line 177 192.2 170.2 192.2 color 16711680 width 2;
   line 196.9 192.4 192.7 192.4 color 16711680 width 2;
  terminals
   input 200 192 fixed;
   output 168 192 fixed;
 end;
 implementation eq
equations
	output = 0*input;implementation_end;
specification_end;
			end;
   Switch2 184 288
			specifications active 'Off'
				specification 'On'
description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\Switch-Make.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:53:10</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type 'Switch-Make'
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 168 272 200 304 fill 15132390;
   ellipse 177 286.3 181 290.7 color 16711680;
   ellipse 188.4 286.4 192.5 290.5 color 16711680;
   line 187.8 287.8 181.2 288 color 16711680 width 2;
   line 177 288.2 170.2 288.2 color 16711680 width 2;
   line 196.9 288.4 192.7 288.4 color 16711680 width 2;
  terminals
   input 200 288 fixed;
   output 168 288 fixed;
 end;
 implementation eq
equations
	output = input;implementation_end;
specification_end;
				specification 'Off'
 description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\Switch-Make.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:53:10</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type 'Switch-Make'
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 168 272 200 304 fill 15132390;
   ellipse 177 286.3 181 290.7 color 16711680;
   ellipse 188.4 286.4 192.5 290.5 color 16711680;
   line 188.3 282.7 181.9 286.9 color 16711680 width 2;
   line 177 288.2 170.2 288.2 color 16711680 width 2;
   line 196.9 288.4 192.7 288.4 color 16711680 width 2;
  terminals
   input 200 288 fixed;
   output 168 288 fixed;
 end;
 implementation eq
equations
	output = 0*input;implementation_end;
specification_end;
			end;
  end;
  connections
   Error\output -> PID\error;
   SP\x -> Error\plus;
   EncoderMotor -> EncToRevMotor\input;
   EncoderLoad -> EncToRevLoadDisk\input;
   PID\output -> PWM;
   PlusMinus2\output -> Error\minus;
   EncToRevLoadDisk\output -> Switch2\input;
   Switch2\output -> PlusMinus2\plus 112 288;
   Switch1\output -> PlusMinus2\plus;
   EncToRevMotor\output -> RevMotorToRevMotorDisk\input;
   RevMotorToRevMotorDisk\output -> Switch1\input;
  end;
  figures
   text 'counts' 432 200 color 32768 13 italic;
   text 'counts' 424 296 color 32768 13 italic;
   text 'rev' 80 96 color 32768 13 italic;
   text 'PWM' 336 96 color 32768 13 italic;
   text 'rev' 336 200 color 32768 13 italic;
   text 'rev' 344 296 color 32768 13 italic;
   text 'rev' 144 200 color 32768 13 italic;
 implementation_end;
specification_end;
			end;
   d 504 64
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Components\Bearing.emx</LibraryPath>
 <TimeStamp>2008-2-26 12:26:02</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type Bearing
     ports
      rotation psi duplicatable in p;
    end;
    icon bg bottom
     figures
      group
       line 492.8 78 496.5 73.9;
       line 496.5 78 500.4 73.9;
       line 500.4 78 504.1 73.9;
       line 504.1 78 508.1 73.9;
       line 508.1 78 511.8 73.9;
       line 494.4 74.2 514.1 74.2 width 2;
      end;
      group
       group
        line 496.9 57.1 501.3 61.9;
        line 496.9 61.9 501.3 57.1;
        line 505.8 57.1 510.3 61.9;
        line 505.8 61.9 510.3 57.1;
        line 501.3 57.1 505.8 61.9;
        line 501.1 61.9 505.8 57.1;
       end;
       group
        line 496.9 66.1 501.3 70.9;
        line 496.9 70.9 501.3 66.1;
        line 505.8 66.1 510.3 70.9;
        line 505.8 70.9 510.3 66.1;
        line 501.3 66.1 505.8 70.7;
        line 501.1 70.9 505.9 66;
       end;
      end;
      line 488 64 520 64;
      group
       line 513 54.1 494 54.1 width 2;
       line 514.6 50 510.7 54.1;
       line 510.7 50 507 54.1;
       line 507 50 503 54.1;
       line 503 50 499.3 54.1;
       line 499.3 50 495.6 54.1;
      end;
     terminals
      p 520 64;
      p 520 64;
      p 488 64;
    end;
    implementation eq
parameters
	real d = 1.0e-4   {N.m.s/rad};
equations
	p.T = d * p.omega;implementation_end;
   EncoderLoad 775.7 122.4
			specifications active 'Absolute'
				specification 'Absolute'
 description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath></LibraryPath>
 <TimeStamp>2007-9-25 16:57:25</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type Encoder
  ports
   rotation in p;
   signal out output;
   signal out rev;
  restrictions
   causality fixed out p;
 end;
 icon bg right
  figures
   group
    rectangle 763.7 110.9 787.7 127.4 fill 13421772;
    rectangle 772.2 127.4 778.6 133.8 fill 9211020;
   end;
  terminals
   p 776 111.9 fixed;
   output 776 135.4 fixed;
 end;
 implementation eq
parameters
	real counts = 2000.0 {};	// pulses per revolution
variables
	real hidden hold_signal, quantisized_signal,holdinput;
equations
	p.T = 0;
	rev = int (p.omega);
	holdinput = (rev / (2 * pi) ) * counts;

	hold_signal = sample ( holdinput );
	if hold_signal < 0.0 then
		quantisized_signal = hold_signal - 0.5;
	else
		 quantisized_signal = hold_signal + 0.5;
	end;
	output = quantisized_signal - (quantisized_signal mod 1); 
            implementation_end;
specification_end;
				specification 'Ideal'
description '<Description>
   <Version>4.0</Version>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
  <TimeStamp>2008-3-13 08:45:04</TimeStamp>
</Description>';
 type Encoder
  ports
   rotation in p;
   signal out output;
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   group
    rectangle 302.9 260.3 319.4 284.3 fill 13421772;
    rectangle 319.4 269.4 325.8 275.8 fill 9211020;
   end;
  terminals
   p 303.9 272 fixed;
   output 327.4 272 fixed;
 end;
 implementation eq
variables
	real phi {rad};	// encoder position
equations
	p.T = 0;
	phi = int (p.omega);
	output = sample ( phi );
             implementation_end;
specification_end;
				specification 'Incremental'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
  <TimeStamp>2007-9-25 16:57:25</TimeStamp>
</Description>';
 type Encoder
 ports
   rotation in p;
   signal out output;
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   group
    rectangle 119 428.3 135.5 452.3 fill 13421772;
    rectangle 135.5 437.4 141.9 443.8 fill 9211020;
   end;
  terminals
   p 120 440 fixed;
   output 143.5 440 fixed;
 end;
 implementation eq
parameters
	real bits = 12 {};			// resolution in amount of bits
	real counts = 2000 {};	// pulses per revolution
variables
	real hidden hold_signal, quantisized_signal,holdinput,rounded_signal;
	real turns {rev};
	real hidden exp2bits;
equations
	p.T = 0;
	turns = int (p.omega);
	holdinput = turns * counts;
	hold_signal = sample ( holdinput );
	if hold_signal < 0.0 then
		quantisized_signal = hold_signal - 0.5;
	else
		 quantisized_signal = hold_signal + 0.5;
	end;
	rounded_signal =  quantisized_signal - (quantisized_signal mod 1); 
	exp2bits = exp2 (bits);
	output = ( ( rounded_signal + 2.5 * exp2bits ) mod exp2bits ) - 0.5 * exp2bits;
implementation_end;
specification_end;
			end;
   EncoderMotor 479.7 122.4
			specifications active 'Absolute'
				specification 'Absolute'
 description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath></LibraryPath>
 <TimeStamp>2007-9-25 16:57:25</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type Encoder
  ports
   rotation in p;
   signal out output;
   signal out rev;
  restrictions
   causality fixed out p;
 end;
 icon bg right
  figures
   group
    rectangle 467.7 110.9 491.7 127.4 fill 13421772;
    rectangle 476.2 127.4 482.6 133.8 fill 9211020;
   end;
  terminals
   p 480 111.9 fixed;
   output 480 135.4 fixed;
 end;
 implementation eq
parameters
	real counts = 2000.0 {};	// pulses per revolution
variables
	real hidden hold_signal, quantisized_signal,holdinput;
equations
	p.T = 0;
	rev = int (p.omega);
	holdinput = (rev / (2 * pi) ) * counts;

	hold_signal = sample ( holdinput );
	if hold_signal < 0.0 then
		quantisized_signal = hold_signal - 0.5;
	else
		 quantisized_signal = hold_signal + 0.5;
	end;
	output = quantisized_signal - (quantisized_signal mod 1); 
            implementation_end;
specification_end;
				specification 'Ideal'
description '<Description>
   <Version>4.0</Version>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
  <TimeStamp>2008-3-13 08:45:04</TimeStamp>
</Description>';
 type Encoder
  ports
   rotation in p;
   signal out output;
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   group
    rectangle 302.9 260.3 319.4 284.3 fill 13421772;
    rectangle 319.4 269.4 325.8 275.8 fill 9211020;
   end;
  terminals
   p 303.9 272 fixed;
   output 327.4 272 fixed;
 end;
 implementation eq
variables
	real phi {rad};	// encoder position
equations
	p.T = 0;
	phi = int (p.omega);
	output = sample ( phi );
             implementation_end;
specification_end;
				specification 'Incremental'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
  <TimeStamp>2007-9-25 16:57:25</TimeStamp>
</Description>';
 type Encoder
 ports
   rotation in p;
   signal out output;
  restrictions
   causality fixed out p;
 end;
 icon bg bottom
  figures
   group
    rectangle 119 428.3 135.5 452.3 fill 13421772;
    rectangle 135.5 437.4 141.9 443.8 fill 9211020;
   end;
  terminals
   p 120 440 fixed;
   output 143.5 440 fixed;
 end;
 implementation eq
parameters
	real bits = 12 {};			// resolution in amount of bits
	real counts = 2000 {};	// pulses per revolution
variables
	real hidden hold_signal, quantisized_signal,holdinput,rounded_signal;
	real turns {rev};
	real hidden exp2bits;
equations
	p.T = 0;
	turns = int (p.omega);
	holdinput = turns * counts;
	hold_signal = sample ( holdinput );
	if hold_signal < 0.0 then
		quantisized_signal = hold_signal - 0.5;
	else
		 quantisized_signal = hold_signal + 0.5;
	end;
	rounded_signal =  quantisized_signal - (quantisized_signal mod 1); 
	exp2bits = exp2 (bits);
	output = ( ( rounded_signal + 2.5 * exp2bits ) mod exp2bits ) - 0.5 * exp2bits;
implementation_end;
specification_end;
			end;
   FlexibleShaft 728 64.5
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type SpringDamper
     ports
      rotation delta in p;
     restrictions
      causality preferred out p;
    end;
    icon ipm bottom
     figures
      line 709.3 72 709.3 56 713.6 50.1 719.5 61.9 725.3 50.1 731.2 61.9 737.1 50.1 742.9 61.9 746.7 56 746.7 72;
      line 704 64 709.3 64;
      line 746.7 64 752 64;
      line 720 65.1 730.7 65.1 730.7 78.9 720 78.9;
      line 709.3 72 725.3 72;
      line 725.3 76.8 725.3 67.2;
      line 730.7 72 746.7 72;
     terminals
      p high 704 64 fixed;
      p low 752 64 fixed;
    end;
    implementation eq
parameters
	real Gb = 1.07e9;		// shear modulus of the bar (steel)
	real lb = 0.295 {m};		// bar length
	real db = 0.0063 {m};	// bar diameter
	real d = 5.0e-4;			// viscous damping of the bar		
variables
	real phi {rad};   			// angular extension
	real k  {N.m/rad};		// roational stiffness of the rod
initialequations
	k = (Gb * pi * db^4) / (32 * lb);
equations
	phi = int (p.omega);
	p.T = k * phi + d*p.omega;implementation_end;
   Ground 400 96
    type Ground
     ports
      electric psi duplicatable in p;
     restrictions
      causality fixed out p;
    end;
    icon ipm bottom
     figures
      line 392 96 408 96;
      line 394.7 100.3 405.3 100.3;
      line 397.3 104 402.7 104;
      line 400 88 400 96;
     terminals
      p 400 88 fixed;
      p 400 88 fixed;
      p 400 88 fixed;
      p 400 88 fixed;
    end;
    implementation eq
equations
	p.u = 0;
 implementation_end;
   JLoadDisk 776 64
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Components\Inertia.emx</LibraryPath>
 <TimeStamp>2008-2-26 12:21:36</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type Inertia
     ports
      rotation psi duplicatable in p;
     restrictions
      causality preferred in p;
    end;
    icon ipm top
     figures
      rectangle 760 48 792 80 fill 13421772;
      text 'J' 776 64 15 italic;
     terminals
      p 760 64;
      p 776 80;
      p 760 64;
    end;
    implementation eq
parameters
	real J = 0.00137 {kg.m2/rad};
variables
	real interesting phi {rad};
	real alpha {rad/s2};
equations
	alpha = p.T / J;
	p.omega = int (alpha);
	phi = int (p.omega); implementation_end;
   Jmotor 552 64
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type Inertia
     ports
      rotation psi duplicatable in p;
     restrictions
      causality preferred in p;
     parameters
      real J = 6.76e-6 {kg.m2/rad}; ""
    end;
    icon ipm bottom
     figures
      rectangle 536 48 568 80 fill 13421772;
      text 'J' 552 64 15 italic;
     terminals
      p 536 64;
      p 536 64;
      p 568 64;
    end;
    implementation eq
variables
	real interesting phi {rad};
	real alpha {rad/s2};
equations
	alpha = p.T / J;
	p.omega = int (alpha);
	phi = int (p.omega); implementation_end;
   JMotorDisk 680 64
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Components\Inertia.emx</LibraryPath>
 <TimeStamp>2008-2-26 12:21:36</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
    type Inertia
     ports
      rotation psi duplicatable in p;
     restrictions
      causality preferred in p;
    end;
    icon ipm top
     figures
      rectangle 664 48 696 80 fill 13421772;
      text 'J' 680 64 15 italic;
     terminals
      p 664 64;
      p 664 64;
      p 696 64;
    end;
    implementation eq
parameters
	real J = 9.07e-4 {kg.m2/rad};
variables
	real interesting phi {rad};
	real alpha {rad/s2};
equations
	alpha = p.T / J;
	p.omega = int (alpha);
	phi = int (p.omega); implementation_end;
   K 461.6 63.5
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
 <Version>No Version Info</Version>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type DCMotor
     ports
      electric delta in p1;
      rotation psi out p2;
     restrictions
      causality constraint equal p1 p2;
     parameters
      real k = 0.0389 {N.m/A}; ""
    end;
    icon bg bottom
     figures
      line 456 87.5 456 39.5;
      rectangle 450.7 47.5 461.4 79.5 fill 0;
      ellipse 443.2 51.2 468.8 76.8 fill 16777215;
      line 480 64 456 64 fill 0;
     terminals
      p1 high 456 40 fixed;
      p1 low 456 88 fixed;
      p2 480 64 fixed;
    end;
    implementation eq
equations
	p2.T = k * p1.i;
	p1.u = k * p2.omega;
implementation_end;
   L 424 40
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
</Description>';
    type Inductor
     ports
      electric delta in p;
     restrictions
      causality preferred in p;
     parameters
      real L = 0.00134 {H}; ""
    end;
    icon ipm ellipse bottom
     figures
      ellipse 418.1 32 430.9 47.5;
      ellipse 430.9 32 443.7 47.5;
      ellipse 405.3 32 418.1 47.5;
      rectangle 405.3 41.1 443.7 48 color 16777215 fill 16777215;
      line 400 40 405.3 40;
      line 442.7 40 448 40;
     terminals
      p high 400 40 fixed;
      p low 448 40 fixed;
    end;
    implementation eq
equations
	p.u = L * ddt(p.i);
    implementation_end;
   Node1 480 64
    knot Node
     ports
      rotation knot psi duplicatable none p [1];
    end;
    icon bg ellipse
     figures
      ellipse 476.8 60.8 483.2 67.2 color -1 fill 0;
      ellipse 475.7 59.7 484.3 68.3 color -1;
     terminals
      p 480 64 fixed;
      p 480 64 fixed;
      p 480 64 fixed;
      p 480 64 fixed;
    end;
    implementation eq
equations
	sum (direct (p.t)) = 0;
	equal (collect (p.a));
  implementation_end;
   R 368 40
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
</Description>';
    type Resistor
     ports
      electric delta in p;
     parameters
      real R = 1.23 {ohm}; ""
    end;
    icon ipm bottom
     figures
      line 344 40 392 40;
      rectangle 352 32 384 48 fill 16777215;
     terminals
      p high 344 40 fixed;
      p low 392 40 fixed;
    end;
    implementation eq
equations
	p.u = R * p.i;
      implementation_end;
   V 330.4 64
    description '<Description>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
 <LibraryPath>Iconic Diagrams\Mechanical\Rotation\Sensors\Encoder.emx</LibraryPath>
</Description>';
    type ModulatedVoltageSource
     ports
      electric delta out p;
      signal in u {V} ;
     restrictions
      causality fixed out p;
    end;
    icon ipm bottom
     figures
      line 313 64 329 64;
      line 335.9 40 335.9 88;
      ellipse 325.3 53.3 347.7 75.7 fill 16777215;
      line 329.5 44.8 329.5 52.3;
      line 326.3 48 333.8 48;
     terminals
      p high 335.9 40 fixed;
      p low 335.9 88 fixed;
      u 312.5 64 fixed;
    end;
    implementation eq
variables
	real hidden current {A};
equations
	current = p.i;
	p.u = u;
implementation_end;
  end;
  connections
   JMotorDisk\p <= Belt\p_out;
   Ground\p => V\p_low;
   Jmotor\p => Belt\p_in;
   JMotorDisk\p => FlexibleShaft\p_high;
   FlexibleShaft\p_low => JLoadDisk\p;
   Node1\p => d\p;
   JLoadDisk\p => EncoderLoad\p;
   V\p_high => R\p_high;
   L\p_low => K\p1_high;
   K\p1_low => Ground\p;
   K\p2 => Node1\p;
   Node1\p => EncoderMotor\p;
   d\p => Jmotor\p;
   R\p_low => L\p_high;
   Amplifier\output -> V\u;
   Controller\PWM -> Amplifier\input;
   EncoderMotor\output -> Controller\EncoderMotor 480 144 160 144;
   EncoderLoad\output -> Controller\EncoderLoad 776 176 112 176;
  end;
 implementation_end;
]]>
</Sidops>
 </Model>
 <Experiments>
     <DefaultExperiment><![CDATA[Converted Experiment]]>
</DefaultExperiment>
  <Experiment>
    <Name>Converted Experiment</Name>
    <CreatedBy></CreatedBy>
    <Info></Info>
<ExpData>
  <VersionNumber>4.3</VersionNumber>
  <ModelProperties>
    <ModelProperty section="CCodeDialog" entry="SubmodelName" value="Controller"/>
    <ModelProperty section="CCodeDialog" entry="TargetName" value="20-sim 4C"/>
  </ModelProperties>
  <Variables>
   <Constants>
   </Constants>
   <Parameters>
   </Parameters>
   <Initials>
    <Variable>
     <Name>EncoderLoad\rev_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>EncoderMotor\rev_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>FlexibleShaft\phi_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>JLoadDisk\p.omega_initial</Name>
     <Unit>rad/s</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>JLoadDisk\phi_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>JMotorDisk\phi_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Jmotor\p.omega_initial</Name>
     <Unit>rad/s</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>Jmotor\phi_initial</Name>
     <Unit>rad</Unit>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>L\p.i_initial</Name>
     <Unit>A</Unit>
     <Value>0</Value>
    </Variable>
   </Initials>
  </Variables>
    <AdditionalUnitInfo>
  <UnitInfo varname="JLoadDisk\phi" unit="rev"/>
   <UnitInfo varname="JMotorDisk\phi" unit="rev"/>
    </AdditionalUnitInfo>
    <PlotSpecs>
     <VarNames>
      <VarName>time</VarName>
      <VarName>JMotorDisk\phi</VarName>
      <VarName>JLoadDisk\phi</VarName>
      <VarName>Controller\SP\x</VarName>
     </VarNames>
     <Plots>
      <Plot>
       <PlotType>GraphPlot</PlotType>
       <BasePlot>
         <PlotId>1</PlotId>
         <UseWindowsBGColor>false</UseWindowsBGColor>
         <BGColor>16777215</BGColor>
         <PlotIsVisible>true</PlotIsVisible>
       </BasePlot>
       <Grid>
        <DrawGrid>true</DrawGrid>
        <GridColor>15780518</GridColor>
        <XTicks>10</XTicks>
        <YTicks>10</YTicks>
        <ZTicks>10</ZTicks>
        <Use3DLook>false</Use3DLook>
       </Grid>
       <PlotBGColor>16777215</PlotBGColor>
       <ShowPlotTitle>true</ShowPlotTitle>
       <TitlePosition>1</TitlePosition>
       <PlotTitle>Motion</PlotTitle>
       <ShowXValues>true</ShowXValues>
       <Fonts>
        <TitleFont>
         <Name>Arial</Name>
         <Height>-13</Height>
         <PitchFamily>34</PitchFamily>
         <Weight>400</Weight>
         <Italic>0</Italic>
         <UnderLine>0</UnderLine>
         <StrikeOut>0</StrikeOut>
         <Color>0</Color>
        </TitleFont>
        <LabelFont>
         <Name>Arial</Name>
         <Height>-13</Height>
         <PitchFamily>34</PitchFamily>
         <Weight>400</Weight>
         <Italic>0</Italic>
         <UnderLine>0</UnderLine>
         <StrikeOut>0</StrikeOut>
         <Color>0</Color>
        </LabelFont>
        <ValuesFont>
         <Name>Arial</Name>
         <Height>-13</Height>
         <PitchFamily>34</PitchFamily>
         <Weight>400</Weight>
         <Italic>0</Italic>
         <UnderLine>0</UnderLine>
         <StrikeOut>0</StrikeOut>
         <Color>0</Color>
        </ValuesFont>
       </Fonts>
       <SharedXAxis>true</SharedXAxis>
       <SharedYAxis>true</SharedYAxis>
       <SharedZAxis>false</SharedZAxis>
       <XAxes>
        <Axis>
         <Minimum>0</Minimum>
         <Maximum>10</Maximum>
         <Linear>true</Linear>
         <Scaling>3</Scaling>
         <Label>time</Label>
        </Axis>
       </XAxes>
       <YAxes>
        <Axis>
         <Minimum>-0.6</Minimum>
         <Maximum>1.4</Maximum>
         <Linear>true</Linear>
         <Scaling>2</Scaling>
         <Label>SP{rev}</Label>
        </Axis>
        <Axis>
         <Minimum>-0.4</Minimum>
         <Maximum>1.6</Maximum>
         <Linear>true</Linear>
         <Scaling>2</Scaling>
         <Label>phi motor</Label>
        </Axis>
        <Axis>
         <Minimum>-0.4</Minimum>
         <Maximum>1.6</Maximum>
         <Linear>true</Linear>
         <Scaling>2</Scaling>
         <Label>phi load</Label>
        </Axis>
       </YAxes>
       <ZAxes>
       </ZAxes>
       <Curves>
        <Curve>
         <LineColor>55295</LineColor>
         <LineStyle>1</LineStyle>
         <TickColor>255</TickColor>
         <TickStyle>0</TickStyle>
         <CurveVisible>true</CurveVisible>
         <PixelThresshold>1</PixelThresshold>
         <LineThickness>2</LineThickness>
         <LineOrder>1</LineOrder>
         <ShowYValues>true</ShowYValues>
         <XCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>time</VarName>
         </XCurveData>
         <YCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>Controller\SP\x</VarName>
         </YCurveData>
        </Curve>
        <Curve>
         <LineColor>2763429</LineColor>
         <LineStyle>1</LineStyle>
         <TickColor>16711935</TickColor>
         <TickStyle>0</TickStyle>
         <CurveVisible>true</CurveVisible>
         <PixelThresshold>1</PixelThresshold>
         <LineThickness>1</LineThickness>
         <LineOrder>1</LineOrder>
         <ShowYValues>true</ShowYValues>
         <XCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>time</VarName>
         </XCurveData>
         <YCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>JMotorDisk\phi</VarName>
         </YCurveData>
        </Curve>
        <Curve>
         <LineColor>37632</LineColor>
         <LineStyle>1</LineStyle>
         <TickColor>255</TickColor>
         <TickStyle>0</TickStyle>
         <CurveVisible>true</CurveVisible>
         <PixelThresshold>1</PixelThresshold>
         <LineThickness>1</LineThickness>
         <LineOrder>1</LineOrder>
         <ShowYValues>true</ShowYValues>
         <XCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>time</VarName>
         </XCurveData>
         <YCurveData>
     <ShowUnit>true</ShowUnit>
     <VarName>JLoadDisk\phi</VarName>
         </YCurveData>
        </Curve>
       </Curves>
       <Legenda>
        <ShowLegenda>true</ShowLegenda>
       </Legenda>
      </Plot>
     </Plots>
     <PlotPanels>
      <PlotPanel>
       <PlotPanelId>1</PlotPanelId>
       <PlotPanelVisible>true</PlotPanelVisible>
       <Name>Window 1</Name>
       <Tiling>0</Tiling>
       <PlotIds>
         <PlotId>1</PlotId>
       </PlotIds>
       <ToggleState>Base</ToggleState>
      </PlotPanel>
     </PlotPanels>
     <WindowRectangles virtualDesktopWidth="3120" virtualDesktopHeight="1050">
       <WindowRectangle monitor="0" left="0" top="0" right="1440" bottom="900" plotpanelid="1">
0.470139 0.244444 0.935417 0.802222
       </WindowRectangle>
     </WindowRectangles>
    </PlotSpecs>
    <RunSpecs>
     <SimulatorSettings>
      <StartTime>0</StartTime>
      <FinishTime>10</FinishTime>
      <Warp>true</Warp>
      <UseOutputAfterEach>false</UseOutputAfterEach>
      <OutputAfterEach>0.01</OutputAfterEach>
      <EventEpsilon>1e-006</EventEpsilon>
      <AlgebraicTolerance>1e-007</AlgebraicTolerance>
      <SteadyStateAnalysis>false</SteadyStateAnalysis>
      <UpdateHoldInstructions>false</UpdateHoldInstructions>
      <DiscreteSystems>
       <DiscreteSystem>
        <DiscreteID>EncoderLoad\hold_signal</DiscreteID>
        <TimeInterval>0.002</TimeInterval>
        <InitialSampleTimeDelay>0</InitialSampleTimeDelay>
        <FixedSampleTimeDelay>0</FixedSampleTimeDelay>
        <VariableTimeDelayMin>0</VariableTimeDelayMin>
        <VariableTimeDelayMax>0</VariableTimeDelayMax>
        <VariableTimeDelayMean>0</VariableTimeDelayMean>
        <VariableTimeDelayDeviation>0</VariableTimeDelayDeviation>
        <UseVariableTimeDelay>false</UseVariableTimeDelay>
        <UniformVariableTimeDelay>false</UniformVariableTimeDelay>
        <UseGlobalTime>true</UseGlobalTime>
        <HoldTimeDelay>0</HoldTimeDelay>
        <ActionOnSampleMissed>0</ActionOnSampleMissed>
       </DiscreteSystem>
      </DiscreteSystems>
     </SimulatorSettings>
     <IntegrationMethods>
      <IntegrationMethod>
       <Name>Euler</Name>
       <StepSize>1e-005</StepSize>
       <AutoStepSize>false</AutoStepSize>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>BackwardEuler</Name>
       <AbsoluteTolerance>1e-005</AbsoluteTolerance>
       <RelativeTolerance>1e-005</RelativeTolerance>
       <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
       <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
       <StepSize>0.01</StepSize>
       <Alpha>1</Alpha>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>AdamsBashforth</Name>
       <StepSize>0.01</StepSize>
       <AutoStepSize>false</AutoStepSize>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>RungeKutta2</Name>
       <StepSize>0.01</StepSize>
       <AutoStepSize>false</AutoStepSize>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>RungeKutta4</Name>
       <StepSize>0.01</StepSize>
       <AutoStepSize>false</AutoStepSize>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>RungeKutta8</Name>
       <UseInitialStepSize>false</UseInitialStepSize>
       <InitialStepSize>0</InitialStepSize>
       <UseMaximumStepSize>false</UseMaximumStepSize>
       <MaximumStepSize>0</MaximumStepSize>
       <AbsoluteTolerance>1e-006</AbsoluteTolerance>
       <RelativeTolerance>1e-006</RelativeTolerance>
       <SafetyFactor>0.9</SafetyFactor>
       <Factor1>0.33</Factor1>
       <Factor2>6</Factor2>
       <Beta>0</Beta>
       <UseMaxNrSteps>false</UseMaxNrSteps>
       <MaxNrSteps>100000</MaxNrSteps>
       <UseStiffDetection>false</UseStiffDetection>
       <MaxNrStiffnessSteps>1000</MaxNrStiffnessSteps>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>RungeKuttaFehlberg</Name>
       <UseInitialStepSize>false</UseInitialStepSize>
       <InitialStepSize>0</InitialStepSize>
       <UseMaximumStepSize>false</UseMaximumStepSize>
       <MaximumStepSize>0</MaximumStepSize>
       <AbsoluteTolerance>1e-006</AbsoluteTolerance>
       <RelativeTolerance>1e-006</RelativeTolerance>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>VodeAdams</Name>
       <UseInitialStepSize>false</UseInitialStepSize>
       <InitialStepSize>0</InitialStepSize>
       <UseMaximumStepSize>true</UseMaximumStepSize>
       <MaximumStepSize>0.0001</MaximumStepSize>
       <AbsoluteTolerance>1e-006</AbsoluteTolerance>
       <RelativeTolerance>1e-006</RelativeTolerance>
       <VodeUseBDF>true</VodeUseBDF>
       <VodeUseNewton>true</VodeUseNewton>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>BDFMethod</Name>
       <AbsoluteTolerance>1e-005</AbsoluteTolerance>
       <RelativeTolerance>1e-005</RelativeTolerance>
       <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
       <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
       <UseInitialStepSize>false</UseInitialStepSize>
       <InitialStepSize>0</InitialStepSize>
       <UseMaximumStepSize>false</UseMaximumStepSize>
       <MaximumStepSize>0</MaximumStepSize>
       <UseFixedStepSize>false</UseFixedStepSize>
       <FixedStepSize>0</FixedStepSize>
      </IntegrationMethod>
      <IntegrationMethod>
       <Name>MeBDFiMethod</Name>
       <AbsoluteTolerance>1e-005</AbsoluteTolerance>
       <RelativeTolerance>1e-005</RelativeTolerance>
       <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
       <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
       <UseInitialStepSize>false</UseInitialStepSize>
       <InitialStepSize>0</InitialStepSize>
       <UseMaximumStepSize>false</UseMaximumStepSize>
       <MaximumStepSize>0</MaximumStepSize>
       <UseFixedStepSize>false</UseFixedStepSize>
       <FixedStepSize>0</FixedStepSize>
      </IntegrationMethod>
      <SelectedIntegrationMethod>7</SelectedIntegrationMethod>
     </IntegrationMethods>
    </RunSpecs>
    <MultipleRun>
     <NrSteps>10</NrSteps>
     <CopyFromStates>false</CopyFromStates>
     <JoinParameterVariation>true</JoinParameterVariation>
     <ClearAfterRun>true</ClearAfterRun>
     <RedrawAfterRun>false</RedrawAfterRun>
     <DrawDuringSimulation>true</DrawDuringSimulation>
     <ActionBeforeOptimization>0</ActionBeforeOptimization>
     <CompareValue>0</CompareValue>
     <UseCompareValue>true</UseCompareValue>
     <MultipleRunType>MultipleRun</MultipleRunType>
     <Minimize>true</Minimize>
     <OptimizationVariable></OptimizationVariable>
     <ResulVarUsage>UseEndValue</ResulVarUsage>
     <Tolerance>0.001</Tolerance>
     <OptimizationMethod>BroydonFletcherGoldfarbShanno</OptimizationMethod>
     <MultipleRunVariables>
     </MultipleRunVariables>
    </MultipleRun>
    <ExportData>
     <WriteAsText>true</WriteAsText>
     <ReadAsText>true</ReadAsText>
     <WriteHeader>true</WriteHeader>
     <ReadHeader>true</ReadHeader>
     <ReadFilename></ReadFilename>
     <WriteFilename></WriteFilename>
     <DoWrite>false</DoWrite>
     <ExportVariables>
     </ExportVariables>
     <ImportVariables>
     </ImportVariables>
    </ExportData>
    <BreakPoints>
    </BreakPoints>
  </ExpData>
  </Experiment>
</Experiments>
</Document>
