<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Icons>
    <Icon size="64" bpp="32" format="png">
<![CDATA[89504e470d0a1a0a0000000d4948445200000040000000400806000000aa6971de000000097048597300000ec400000ec401952b0e1b000000d749444154789ced9bd10d833010c5eeaa0cc62cecd12ff6e82cddecba43887095b3ff832cebfd44405655cc9299f387ff84172d4033563ce4fdf9ae78cca35ce711112ec00006a005680c400bd0188016a031002d40d33ec0d8e14677071710317f9bbbce63990845fb05188016a031002d4063005a80c600b4008d0168011a03d0023406a005680c400bd0188016a031002d4063005a80c600b4008d0168019af60146c41e2f396771015595b38777f8b8a2fd020c400bd0188016a031002d4063005a80c600b4008d0168019af4e7e9e6dc5ac00efc00edf817aaa4ddbc1e0000000049454e44ae426082]]>
   </Icon>
</Icons>
 <Model version="4.1" build="4.1.3.6">
    <Sidops>
<![CDATA[Encoder1 224 128.5 description '<Description>
   <Version>4.1</Version>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <LibraryPath>D:\Documents\Dropbox\Projects\destecs_workspace\lib_encoder\model_ct\rotary_encoder.emx</LibraryPath>
  <TimeStamp>2011-10-12 17:29:01</TimeStamp>
</Description>'; type Submodel  ports   signal in input;   signal out output; end; icon bg bottom  figures   rectangle 216 113 240 144 fill 12623485;   rectangle 208 120 216 136 fill 12623485;  terminals   input 240 128 fixed;   output 208 128 fixed; end; implementation bg  submodels   Gain2 256 64    type Gain     ports      signal in input;      signal out output;     parameters      real K = 2000.0;    end;    icon bg bottom     figures      rectangle 240.1 48 271.9 80 fill 15132390;      text 'K' 256 64 color 16711680 16 bold;    end;    implementation eqequations	output = K * input;    implementation_end;   Integrate2 320 64    type Integrate     ports      signal in input;      signal out output;     parameters      real initial = 0.0;    end;    icon bg bottom     figures      rectangle 304 48 336 80 fill 15132390;      text 'ò' 320 61.3 color 16711680 'SymbolProp BT' 21 symbol;    end;    implementation eqequations	output = int (input, initial);     implementation_end;   LatentFault 320 103.5			specifications active 'nofault'				specification 'drift'description '<Description> <Version>4.0</Version> <LibraryPath>Template\Submodel-Equation.emx</LibraryPath> <IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <TimeStamp>2007-11-1 22:32:1</TimeStamp> <AllowLibraryUpdate>False</AllowLibraryUpdate></Description>'; type 'Submodel-Equation'  ports   signal in input_in;   signal out input_out;   signal in int_in;   signal out int_out;  parameters   real drift_ratio = 0.95;   real fault_time = 0.5 {s}; end; icon bg bottom  figures   line 296 64 280 64 color 12632256;   rectangle 272 113 368 143 color 255 fill 65535;   line 360 64 344 64 color 255;   text 'DRIFT' 320 128 color 255 15 bold italic;   line 352 112 352 64 352 64 color 255;   line 288 112 288 64 288 64 color 12632256;  terminals   input_in 360 64 fixed;   input_out 344 64 fixed;   int_in 296 64 fixed;   int_out 280 64 fixed; end; implementation eqvariables  boolean fault;initialequations  fault = false;equations  // activate fault  if timeevent(fault_time) then    fault = true;  end;  // input is modified by drift  if(fault) then    input_out = input_in * drift_ratio;  else    input_out = input_in;  end;  // integration unaffected  int_out = int_in;implementation_end;specification_end;				specification 'bitflip' description '<Description> <Version>4.0</Version> <LibraryPath>Template\Submodel-Equation.emx</LibraryPath> <IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <TimeStamp>2007-11-1 22:32:1</TimeStamp> <AllowLibraryUpdate>False</AllowLibraryUpdate></Description>'; type 'Submodel-Equation'  ports   signal in input_in;   signal out input_out;   signal in int_in;   signal out int_out;  parameters   real fault_time = 0.5 {s};   real err_mag = 0.5; end; icon bg bottom  figures   line 296 64 280 64 color 255;   rectangle 272 113 368 143 color 255 fill 14745599;   line 360 64 344 64;   text 'BIT FLIP' 320 128 color 255 15 bold italic;   line 352 112 352 64 352 64 color 9143144;   line 288 112 288 64 288 64 color 255;  terminals   input_in 360 64 fixed;   input_out 344 64 fixed;   int_in 296 64 fixed;   int_out 280 64 fixed; end; implementation eqvariables   boolean fault;  real error;initialequations  fault = false;  error = 0;equations  // input unaffected  input_out = input_in;  // fault active, set error   if timeevent(fault_time) then    fault = true;    error = int_in * err_mag;  end;  // integrate is modified by error  int_out = int_in + error;implementation_end;specification_end;				specification 'nofault' description '<Description> <Version>4.0</Version> <LibraryPath>Template\Submodel-Equation.emx</LibraryPath> <IsMainModel>1</IsMainModel> <KeepParameterValues>False</KeepParameterValues> <TimeStamp>2007-11-1 22:32:1</TimeStamp> <AllowLibraryUpdate>False</AllowLibraryUpdate></Description>'; type 'Submodel-Equation'  ports   signal in input_in;   signal out input_out;   signal in int_in;   signal out int_out; end; icon bg bottom  figures   line 296 64 280 64;   rectangle 272 113 368 143 fill 14013909;   line 360 64 344 64;   text 'NO FAULT' 320 128 color 16711680 15 bold italic;   line 352 112 352 64 352 64 color 9143144;   line 288 112 288 64 288 64 color 9143144;  terminals   input_in 360 64 fixed;   input_out 344 64 fixed;   int_in 296 64 fixed;   int_out 280 64 fixed; end; implementation eqequations  input_out = input_in;  int_out = int_in; implementation_end;specification_end;			end;   plug input 416 64;   plug output 40 64;   Quantize2 192 64    type Quantize     ports      signal in input;      signal out output;     parameters      real lsb = 1.0;    end;    icon bg bottom     figures      rectangle 176 48 208 80 fill 15132390;      group       line 202.3 54.1 202.3 57.1 color 16711680;       line 202.3 57.1 198.8 57.1 color 16711680;       line 198.8 57.1 198.8 59.9 color 16711680;       line 198.8 59.9 195.3 59.9 color 16711680;       line 195.3 59.9 195.3 62.8 color 16711680;       line 195.3 62.8 191.7 62.8 color 16711680;       line 191.7 62.8 191.7 65.7 color 16711680;       line 191.7 65.7 188.2 65.7 color 16711680;       line 188.2 65.7 188.2 68.6 color 16711680;       line 188.2 68.6 184.6 68.6 color 16711680;       line 184.6 68.6 184.6 71.5 color 16711680;       line 184.6 71.5 181 71.5 color 16711680;       line 181 74.3 181 71.5 color 16711680;      end;    end;    implementation eqvariables	real q, half_lsb;equations	half_lsb = lsb / 2;	q = if input < 0.0 then 		input - half_lsb	else		input + half_lsb	end;	output = q - (q mod lsb);    implementation_end;   Sample1 128 64    type Sample     ports      signal in input;      signal out output;    end;    icon bg bottom     figures      rectangle 112 48 144 80 fill 15132390;      line 114.3 54.8 117.2 54.8 117.2 50.9 121.3 50.9 121.3 54.8 125.2 54.8 125.2 50.9 127.1 50.9 color 16711680 fill 15132390;      line 127.5 56.4 129.7 56.4 129.7 62.4 130.6 60.9 fill 15132390;      line 129 61.1 129.7 62.4 fill 15132390;      line 115.9 67.9 123.9 67.9 136 64 fill 15132390 width 2;    end;    implementation eqequations	output = sample (input);      implementation_end;  end;  connections   LatentFault\input_out -> Integrate2\input;   Gain2\output -> Quantize2\input;   Quantize2\output -> Sample1\input;   Integrate2\output -> LatentFault\int_in;   Sample1\output -> output;   input -> LatentFault\input_in;   LatentFault\int_out -> Gain2\input;  end;  figures   rectangle 472 40 808 408 fill 14745599;   text 'This is a model of a rotary encoder. The input is the speed of some shaft in revolutions per second and the output is a count indicating the number of rotations (the gain determines the number of counts per revolution). The fault block can modify the value before or after the integration. Three implementations are give:  * Bit flip (sudden large jump)  * Drift (subtle slow change)  * NoFault (does not alter the value)Implementations can be selected and faultsactivated from the DESTECS tool. Further implementations can be created as necessary.' 640 224 20; implementation_end;]]>
  </Sidops>
</Model>
</Document>
